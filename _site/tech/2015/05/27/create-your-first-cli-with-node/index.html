
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>创建你人生中第一个CLI</title>

    
    <meta name="description" content="">
    

    <meta name="author" content="Howard.Zuo">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimal-ui"/>
    
    
    <base href="/">
    

    
    <base href="/">
    

    <!-- materiallize styles -->
    <link href="/assets/themes/materiallize/css/materialize.min.css" rel="stylesheet">
    <!-- fontawesome styles -->
    <link href="/assets/themes/materiallize/css/font-awesome.min.css" rel="stylesheet">
    <!-- tooltipster styles -->
    <link href="/assets/themes/materiallize/css/tooltipster.css" rel="stylesheet">
    <!-- prism styles -->
    <link href="/assets/themes/materiallize/css/prism.css" rel="stylesheet">
    
    <!-- Custom styles -->
    <link href="/assets/themes/materiallize/css/style.css" rel="stylesheet" type="text/css" media="all">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="/assets/themes/materiallize/js/html5shiv.js"></script>
      <script src="/assets/themes/materiallize/js/respond.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="/assets/images/favicon.ico">
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/images/apple-touch-icon-114x114.png">

    <script type="text/javascript" src="/assets/themes/materiallize/js/modernizr.js"></script>

  </head>

  <body>

      <nav class="light-blue lighten-1" role="navigation">
          <div class="nav-wrapper container">
              <a id="logo-container" href="/" class="brand-logo">右领军大都督</a>
              <ul class="right hide-on-med-and-down">
                  
                  
                  


  
    
  
    
      
          
          <li><a href="/index.html" lang="HOME"></a></li>
          
      
    
  
    
      
          
          <li><a href="/archive.html" lang="ARCHIVE"></a></li>
          
      
    
  
    
      
          
          <li><a href="/categories.html" lang="CATEGORIES"></a></li>
          
      
    
  
    
      
          
          <li><a href="/tags.html" lang="TAGS"></a></li>
          
      
    
  



              </ul>

              <ul id="nav-mobile" class="side-nav">
                  
                  
                  


  
    
  
    
      
          
          <li><a href="/index.html" lang="HOME"></a></li>
          
      
    
  
    
      
          
          <li><a href="/archive.html" lang="ARCHIVE"></a></li>
          
      
    
  
    
      
          
          <li><a href="/categories.html" lang="CATEGORIES"></a></li>
          
      
    
  
    
      
          
          <li><a href="/tags.html" lang="TAGS"></a></li>
          
      
    
  



              </ul>
              <a href="#" data-activates="nav-mobile" class="button-collapse right"><i class="mdi-navigation-menu"></i></a>
          </div>
      </nav>
      
      <main>
          <div class="container">
              
<div class="row">
    <div class="col s12 m8">
        
        
<h4 id="section">预备</h4>

<ol>
  <li>分分钟使用默认选项安装完<a href="https://nodejs.org/">nodejs</a></li>
  <li>分分钟使用<code>sudo npm install -g yo</code>安装完<a href="http://yeoman.io/">yeoman</a></li>
  <li>通过<code>sudo npm install -g generator-cli-starter</code>安装cli开发脚手架</li>
</ol>

<blockquote>
  <p>OK, 现在我们可以使用<code>yo cli-starter</code>命令开始我们<code>cli</code>开发之旅了</p>
</blockquote>

<h4 id="cli">创建<code>cli</code>项目</h4>

<pre><code class="language-bash">yo cli-starter
</code></pre>

<blockquote>
  <p>按照提示输入<code>项目名称</code>、<code>命令名称</code>，完成<code>cli</code>项目创建。后续的教程中我们将使用<code>hi</code>作为你的<code>命令名称</code>，如果你使用了其他命令名称，请注意替换</p>
</blockquote>

<h4 id="lets-try-first">Let’s try first</h4>

<p>现在命令行中输入如下命令(如果你用的不是<code>hi</code>，注意替换)</p>

<pre><code class="language-bash">hi
</code></pre>

<p>效果如下：</p>

<p><img src="/assets/images/cli-starter-example.png" alt="" /></p>

<h4 id="section-1">试个常见命令？</h4>

<p>我们接下来就开发一个类似<code>ls</code>, <code>ls -all</code>的命令，这里面需要用到一个<code>node</code>模块<a href="https://github.com/tj/commander.js">commander</a>，先来安装一下：</p>

<p>进入该项目根目录执行<code>npm install --save commander</code>，</p>

<p>然后用你喜欢的editor打开<code>bin/hi.js</code>，并用以下内容替换原先的代码：</p>

<pre><code class="language-javascript">#!/usr/bin/env node

'use strict';

var program = require('commander');

program
    .version('0.0.1');//声明hi的版本号

program
    .command('list')//声明hi下有一个命令叫list
    .description('list files in current working directory')//给出list这个命令的描述
    .option('-a, --all', 'Whether to display hidden files')//设置list这个命令的参数
    .action(function(options) {//list命令的实现体
        var fs = require('fs');
        //获取当前运行目录下的文件信息
        fs.readdir(process.cwd(), function(err, files) {
            var list = files;
            //检查用户是否给了--all或者-a的参数，如果没有，则过滤掉那些以.开头的文件
            if (!options.all) {
                list = files.filter(function(file) {
                    return file.indexOf('.') !== 0;
                });
            }
            console.log(list.join(' '));//控制台将所有文件名打印出来
        });
    });

program.parse(process.argv);//开始解析用户输入的命令
</code></pre>

<p>OK，现在来试试我们刚写好的命令吧，</p>

<pre><code class="language-bash">hi -V
</code></pre>

<p><img src="/assets/images/cli-starter-version.png" alt="" /></p>

<pre><code class="language-bash">hi list
</code></pre>

<p><img src="/assets/images/cli-starter-list.png" alt="" /></p>

<pre><code class="language-bash">hi list -a
</code></pre>

<p><img src="/assets/images/cli-starter-list-a.png" alt="" /></p>

<h4 id="section-2">如何发布</h4>

<p>首先需要在<a href="https://github.com/">Github</a>上创建一个项目，并把我们刚才写的代码同步上去。</p>

<p>然后通过<code>npm publish</code>命令将你的cli发布到<a href="https://www.npmjs.com/">npm</a>。</p>

<p>然后其他用户就可以通过<code>npm install -g [项目名称]</code>将你的命令安装到本地使用了</p>


        <div class="right-align pagination-group">
            
                <a href="/tutorial/2015/04/10/theme-introduction" class="btn waves-effect waves-light blue lighten-2" style="border-top-right-radius: 0; border-bottom-right-radius: 0;">
                    &larr; <span lang="PREVIOUS_BTN"></span>
                </a>
            
                <a href="/archive.html" class="btn waves-effect waves-light blue" style="border-radius: 0;" lang="ARCHIVE_BTN"></a>
            
                <a href="/tech/2015/07/01/setup-frontend-env-with-atom" class="btn waves-effect waves-light blue lighten-2" style="border-top-left-radius: 0; border-bottom-left-radius: 0;">
                    <span lang="NEXT_BTN"></span> &rarr;
                </a>
            
        </div>
        
        <br/>
        <hr>

        


  <div class="ds-thread" data-thread-key="/tech/2015/05/27/create-your-first-cli-with-node" data-title="创建你人生中第一个CLI" data-url="http://leftstick.gitcafe.io/tech/2015/05/27/create-your-first-cli-with-node"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"leftstickgithub"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>




    </div>
    <div class="col m4 hide-on-small-only">
        <div class="card blue-grey darken-1 z-depth-2">
            <div class="card-content white-text">
              <span class="card-title">创建你人生中第一个CLI</span>
            </div>
            <div class="card-action blue-grey lighten-4">
                <span lang="CREATED_ON"></span> 2015-05-27
            </div>
        </div>

        <div class="card-panel grey lighten-5 z-depth-2">
            <div class="row valign-wrapper">
                <div class="col s12">
                    <i class="fa fa-server fa-lg grey-text text-darken-4"></i>&nbsp;&nbsp;<strong class="grey-text text-darken-4" lang="CATEGORIES"></strong>
                    <hr>
                    
                      
                      <a href="/categories.html#tech-ref" class="waves-effect waves-light btn tag deep-orange">
                          tech&nbsp;11
                      </a>
                      
                    
                </div>
            </div>
        </div>

        <div class="card-panel grey lighten-5 z-depth-2">
            <div class="row valign-wrapper">
                <div class="col s12">
                    <i class="fa fa-flag fa-lg grey-text text-darken-4"></i>&nbsp;&nbsp;<strong class="grey-text text-darken-4" lang="TAGS"></strong>
                    <hr>
                    
                      
                      <a href="/tags.html#node-ref" class="waves-effect waves-light btn tag deep-orange">
                          node&nbsp;2
                      </a>
                      
                      <a href="/tags.html#cli-ref" class="waves-effect waves-light btn tag deep-orange">
                          cli&nbsp;1
                      </a>
                      
                    
                </div>
            </div>
        </div>
    </div>
</div>

          </div>
      </main>

      <div class="goto-top hide-on-med-and-down">
          <i class="fa fa-chevron-up fa-2x"></i>
      </div>

      <footer class="page-footer" style="padding-top:0;">
          
          <div class="footer-copyright">
            <div class="container">
            &copy; 2016 Howard.Zuo, All rights reserved.
            <a class="grey-text text-lighten-4 right" href="https://github.com/leftstick/jekyll-materiallize/blob/master/LICENSE">MIT License</a>
            </div>
          </div>
      </footer>

      


      <!-- Placed at the end of the document so the pages load faster -->
      <script src="/assets/themes/materiallize/js/jquery-2.1.3.min.js"></script>
      <script src="/assets/themes/materiallize/js/materialize.min.js"></script>
      <script src="/assets/themes/materiallize/js/jquery.tooltipster.min.js"></script>
      <script src="/assets/themes/materiallize/js/prism.js"></script>
      <script src="/assets/themes/materiallize/js/prism.clojure.js"></script>
      <script src="/assets/lang/lang.js"></script>
      <script src="/assets/themes/materiallize/js/init.js"></script>
  </body>
</html>

